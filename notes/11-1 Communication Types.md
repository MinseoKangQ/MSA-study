# Communication Types

Spring Cloud로 개발된 마이크로서비스는 동기 방식 혹은 비동기 방식으로 서로 통신을 할 수 있다.

<br>

### 1. 동기 방식(Synchronous HTTP communication)

동기 방식에서는 클라이언트가 요청을 보낸 후 응답을 받을 때까지 대기한다. 이 과정에서 클라이언트는 다른 작업을 처리하지 못하며, 서버는 요청에 대한 처리가 완료되어야만 클라이언트에게 응답을 줄 수 있다. RESTful API와 같이 주로 HTTP 기반의 통신이 여기에 해당된다.
장점 : 구현이 단순하고 이해하기 쉬우며, 클라이언트가 요청에 대한 즉각적인 응답을 받을 수 있다.
단점 : 서버나 네트워크의 부하가 걸릴 경우 클라이언트는 대기 시간이 길어질 수 있으며, 마이크로서비스 간의 결합도가 높아질 수 있다.
예시 : RestTemplate, WebClient (비동기 방식으로도 사용 가능)

<br>

### 2. 비동기 방식 (Asynchronous communication over AMQP (AMQP 프로토콜))

비동기 방식에서는 클라이언트가 요청을 보낸 후 즉시 다음 작업을 수행할 수 있으며, 서버가 나중에 결과를 준비하면 그 결과를 클라이언트에 전달한다. 이를 위해 메시지 큐(MQ)를 사용하여 메시지를 주고받거나, 이벤트 기반의 통신을 활용한다.
장점 : 서비스 간의 결합도를 낮추고, 처리 성능을 높일 수 있으며, 비동기 메시지 전송을 통해 여러 서비스를 효율적으로 연결할 수 있다.
단점 : 요청-응답 사이클이 명확하지 않기 때문에 시스템 복잡도가 증가할 수 있으며, 메시지 중개자(Message Broker)나 큐를 운영할 필요가 있다.
예시 : RabbitMQ, Kafka, SQS 등을 통한 메시지 기반의 비동기 통신

<br>

### 3. Eureka 서비스 예시
예를 들어 Eureka Discovery Service에 두 개의 ORDER SERVICE(60001, 60002)가 있다고 가정하자. USER SERVICE는 Eureka Service에게 어떤 ORDER SERVICE를 사용할지 물어보고, 사용될 서비스를 부여받는다. 이때 HTTP 요청으로 동기적으로 통신할 수 있으며, 또는 메시지 큐를 사용하여 비동기적으로 처리할 수 있다.
**동기 통신**의 경우 유저 서비스는 Eureka를 통해 선택된 ORDER SERVICE에 요청을 보내고, 그 요청에 대한 응답이 올 때까지 대기한다.
**비동기 통신**의 경우, 주문 생성 이벤트를 메시지 큐에 전송하고, ORDER SERVICE가 이를 비동기적으로 처리한 후 응답할 수 있다.